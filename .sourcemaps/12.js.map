{"version":3,"sources":["../../src/pages/event-detail/event-detail.module.ts","../../src/pages/event-detail/event-detail.ts"],"names":[],"mappings":"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","file":"12.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { IonicPageModule } from 'ionic-angular';\n\nimport { EventDetailPage } from './event-detail';\n\n@NgModule({\n  declarations: [\n    EventDetailPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(EventDetailPage),\n    TranslateModule.forChild()\n  ],\n  exports: [\n    EventDetailPage\n  ]\n})\nexport class EventDetailPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/event-detail/event-detail.module.ts","import { Component } from '@angular/core';\nimport { ViewChild } from '@angular/core';\nimport { NavParams } from 'ionic-angular';\nimport { IonicPage, NavController } from 'ionic-angular';\nimport { Http } from '@angular/http';\nimport {Headers, RequestOptions} from '@angular/http'\nimport 'rxjs/add/operator/map';\nimport { Observable } from 'rxjs/Observable';\nimport { Storage } from '@ionic/storage';\nimport { Platform } from 'ionic-angular';\nimport { Geolocation } from '@ionic-native/geolocation';\nimport { NativeGeocoder } from '@ionic-native/native-geocoder';\n\nimport firebase from 'firebase';\n\n// import { Items } from '../../providers/providers';\n\n@IonicPage()\n@Component({\n  selector: 'page-event-detail',\n  templateUrl: 'event-detail.html'\n})\nexport class EventDetailPage {\n  item: any;\n  isRegister: Boolean = true;\n\n  user = firebase.auth().currentUser;\n\n  ios: Boolean;\n\n  latitude : any;\n  longitude : any;\n  userLat: any;\n  userLong: any;\n  distance: number;\n\n  searched: Boolean = false;\n\n  baseUrl: string = 'https://yourunity.org';\n\n  constructor(public navCtrl: NavController, public navParams: NavParams, public http: Http, public storage: Storage, public platform: Platform, private nativeGeocoder: NativeGeocoder, private geolocation: Geolocation) {\n    this.geolocation.getCurrentPosition().then((resp) => {\n      this.userLat = resp.coords.latitude;\n      this.userLong = resp.coords.longitude;\n     }).catch((error) => {\n       console.log('Error getting location', error);\n    });\n\n     this.item = navParams.get(\"eventDetails\");\n    \n    if (this.platform.is('ios')) {\n      this.ios = true;\n    }\n    else {\n      this.ios = false;\n    }\n  }\n\n  ionViewDidLoad() {\n    this.geolocation.getCurrentPosition().then((resp) => {\n      this.userLat = resp.coords.latitude;\n      this.userLong = resp.coords.longitude;\n     }).catch((error) => {\n       console.log('Error getting location', error);\n     });\n\n     this.storage.get(this.item.id.toString()).then((val) => {\n      if(val) {\n        this.item.isRegister = false;\n      }\n      else {\n        this.item.isRegister = true;\n      }      \n    }); \n  }\n\n  calculateCoords() {\n    this.item.distance = this.calculateDistance(this.userLat, this.item[0].latitude, this.userLong, this.item[0].longitude);\n  }\n\n  calculateDistance(lat1:number,lat2:number,long1:number,long2:number){\n    let p = 0.017453292519943295;    // Math.PI / 180\n    let c = Math.cos;\n    let a = 0.5 - c((lat1-lat2) * p) / 2 + c(lat2 * p) *c((lat1) * p) * (1 - c(((long1- long2) * p))) / 2;\n    let dis = (12742 * Math.asin(Math.sqrt(a))); // 2 * R; R = 6371 km\n    dis = Math.round( ((dis)) * 10 ) / 10;\n    return dis;\n  }\n\n  canRegister() {\n    return this.item.isRegister;\n  }\n\n  register() {\n    var user_id = firebase.auth().currentUser.uid;\n    var url = this.baseUrl + '/api/register_event';\n    var data =\n      \"event_id=\" +  this.item.id +\n      \"&user_id=\" + this.item.user_id +\n      \"&firedb_id=\" + user_id +\n      \"&check_in_time=\" + 0 +\n      \"&duration=\" + 0 +\n      \"&activity_status=\" + 2;\n\n    let headers = new Headers ({ 'Content-Type': 'application/x-www-form-urlencoded' });\n    let options = new RequestOptions({ headers: headers }); \n\n    // Check in user on server\n    this.http.post(url, data, options)\n    .map(res => res.json())\n    .subscribe(data =>\n      console.log(data)\n    );\n\n    console.log(\"Registration completed\");\n\n    this.item.isRegister = false;\n\n    this.storage.set(this.item.id.toString(), \"registered\");\n  }\n\n  linkify(inputText) {\n    var replacedText, replacePattern1, replacePattern2, replacePattern3;\n\n    //URLs starting with http://, https://, or ftp://\n    replacePattern1 = /(\\b(https?|ftp):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/gim;\n    replacedText = inputText.replace(replacePattern1, '<a href=\"$1\" target=\"_blank\">$1</a>');\n\n    //URLs starting with \"www.\" (without // before it, or it'd re-link the ones done above).\n    replacePattern2 = /(^|[^\\/])(www\\.[\\S]+(\\b|$))/gim;\n    replacedText = replacedText.replace(replacePattern2, '$1<a href=\"http://$2\" target=\"_blank\">$2</a>');\n\n    //Change email addresses to mailto:: links.\n    replacePattern3 = /(([a-zA-Z0-9\\-\\_\\.])+@[a-zA-Z\\_]+?(\\.[a-zA-Z]{2,6})+)/gim;\n    replacedText = replacedText.replace(replacePattern3, '<a href=\"mailto:$1\">$1</a>');\n\n    return replacedText;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/event-detail/event-detail.ts"],"sourceRoot":""}