{"version":3,"sources":["../../src/pages/content/content.module.ts","../../src/pages/content/content.ts"],"names":[],"mappings":"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","file":"13.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { IonicPageModule } from 'ionic-angular';\n\nimport { ContentPage } from './content';\n\n@NgModule({\n  declarations: [\n    ContentPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ContentPage),\n    TranslateModule.forChild()\n  ],\n  exports: [\n    ContentPage\n  ]\n})\nexport class ContentPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/content/content.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController } from 'ionic-angular';\nimport { Http } from '@angular/http';\nimport {HttpModule, Headers, RequestOptions, Response} from '@angular/http'\nimport 'rxjs/add/operator/map';\nimport { Observable } from 'rxjs/Observable';\nimport { Storage } from '@ionic/storage';\nimport { Platform } from 'ionic-angular';\nimport { Geolocation } from '@ionic-native/geolocation';\nimport { NativeGeocoder, NativeGeocoderReverseResult, NativeGeocoderForwardResult } from '@ionic-native/native-geocoder';\n\nimport firebase from 'firebase';\n//import { SettingsPage } from '../settings/settings';\n\n@IonicPage()\n@Component({\n  selector: 'page-content',\n  templateUrl: 'content.html'\n})\n\nexport class ContentPage {\n  user = firebase.auth().currentUser;\n  numEvents = 0;\n  time = 0;\n\n  cardItems: any[] = [];\n  dataItems: any[];\n  opened: Boolean = false;\n  isInEnabled: Boolean = false;\n  isOutEnabled: Boolean = false;\n  checkin: any;\n  ios: Boolean;\n  latitude : any;\n  longitude : any;\n  location: Geolocation;\n  userLat: any;\n  userLong: any;\n  distance: number;\n\n  baseUrl: string = 'https://yourunity.org';\n\n  constructor(public navCtrl: NavController, public http: Http, public storage: Storage, public platform: Platform, private nativeGeocoder: NativeGeocoder, private geolocation: Geolocation) { \n\n    // Getting user events\n\n    this.pullEvents();\n\n    if (this.platform.is('ios')) {\n      this.ios = true;\n    }\n    else {\n      this.ios = false;\n    }\n  }\n\n  ionViewDidLoad() {\n    this.getUserLocation();\n    //this.storage.clear();\n  }\n\n  pullEvents() {\n    this.cardItems = [];\n    this.http.get(this.baseUrl + '/api/user_events/' + this.user.uid).map(res => res.json()).subscribe(data => {\n      this.dataItems = data;\n\n      this.numEvents = this.dataItems[this.dataItems.length-2];\n      this.time = this.dataItems[this.dataItems.length-1];\n\n      for(var i = 0; i < this.dataItems.length - 2; i++) {\n        this.cardItems.push(this.dataItems[i]);\n      }\n      \n      for(var i = 0; i < this.cardItems.length; i++) {\n\n        this.time = Math.round( ((this.time)/3600) * 10 ) / 10;\n\n        var item = this.cardItems[i];\n\n        // if statement to check if time has started and check status (1 = event started, 2 = not started)\n        if(item.starts <= Math.round((new Date()).getTime() / 1000) && item.ends >= Math.round((new Date()).getTime() / 1000)) {\n          var key = item.id.toString() + \"_check\";\n          this.storage.get(key).then((val) => {\n            if(val) {\n              console.log(\"id: \" + item.id + \", checkin turned off\");\n              this.setIn(item, false);\n              this.setOut(item, true);\n            }\n            else {\n              console.log(\"id: \" + item.id + \", checkin turned on\");\n              this.setIn(item, true);\n              this.setOut(item, false);\n            }      \n          });      \n        }\n        else {\n          item.isInEnabled = false;\n          item.isOutEnabled = false;\n        }\n\n        item.distance = this.calculateDistance(this.userLat, item[0].latitude, this.userLong, item[0].longitude);\n      }\n      console.log(this.cardItems);\n      console.log(this.user.uid);\n    });\n\n    console.log(\"Lat: \" + this.userLat);\n    console.log(\"Long: \" + this.userLong);\n  }\n\n  getUserLocation() {\n    this.geolocation.getCurrentPosition().then((resp) => {\n      this.userLat = resp.coords.latitude;\n      this.userLong = resp.coords.longitude;\n     }).catch((error) => {\n       console.log('Error getting location', error);\n     });\n  }\n\n  ////////// Functions for Settings //////////////\n\n  openSettings() {\n    this.navCtrl.push('SettingsPage');\n  }\n\n  /////////// Functions for User Events ////////////\n\n  calculateDistance(lat1:number,lat2:number,long1:number,long2:number){\n    let p = 0.017453292519943295;    // Math.PI / 180\n    let c = Math.cos;\n    let a = 0.5 - c((lat1-lat2) * p) / 2 + c(lat2 * p) *c((lat1) * p) * (1 - c(((long1- long2) * p))) / 2;\n    let dis = (12742 * Math.asin(Math.sqrt(a))); // 2 * R; R = 6371 km\n    dis = Math.round( ((dis)) * 10 ) / 10;\n    return dis;\n  }\n\n  doRefresh(refresher) {\n    this.pullEvents();\n\n    setTimeout(() => {\n      console.log('Async operation has ended');\n      refresher.complete();\n    }, 700);\n  }\n\n  toggle(item) {\n    console.log(item.id);\n    item.opened = !item.opened;\n  }\n\n  setIn(item, isIt) {\n    console.log(\"in\");\n    console.log(isIt);\n    item.isInEnabled = isIt;\n  }\n\n  setOut(item, isIt) {\n    item.isOutEnabled = isIt;\n  }\n\n  isCardOpened(item) {\n    return item.opened;\n  }\n\n  isCheckin(item) {\n    return item.isInEnabled;\n  }\n\n  isCheckout(item) {\n    return item.isOutEnabled;\n  }\n\n  checkIn(item) {\n    if(item.distance < 0.2) {\n      var user_id = this.user.uid;\n      var url = this.baseUrl + '/api/check';\n      var checkinTime = Math.round((new Date()).getTime() / 1000)\n      var data =\n        \"check_in_time=\" + Math.round((new Date()).getTime() / 1000) +\n        \"&duration=\" + 0 +\n        \"&activity_status=\" + 1 +\n        \"&firedb_id=\" + user_id +\n        \"&event_id=\" + item.id;\n      let headers = new Headers ({ 'Content-Type': 'application/x-www-form-urlencoded' });\n      let options = new RequestOptions({ headers: headers }); \n\n      // Check in user on server\n      this.http.post(url, data, options)\n      .map(res => res.json())\n      .subscribe(data =>\n        console.log(data)\n      );\n\n      console.log(\"Checked in\");\n\n      item.isInEnabled = false;\n      item.isOutEnabled = true;\n\n      var key = item.id.toString() + \"_check\";\n      this.storage.set(key, checkinTime);\n      this.storage.get(key).then((val) => {console.log(val)});\n    }\n    else {\n      alert(\"You are not close enough to the event. Please move closer.\")\n    }\n  }\n\n  checkOut(item) {\n    if(item.distance < 0.2) {\n      var key = item.id.toString() + \"_check\";\n      var duration = Math.round((new Date()).getTime() / 1000);\n\n      this.storage.get(key).then((checkin) => {\n        duration = duration - checkin;\n        var user_id = this.user.uid;\n        var url = this.baseUrl + '/api/check';\n        var data =\n          \"check_in_time=\" + checkin +\n          \"&duration=\" + duration +\n          \"&activity_status=\" + 0 +\n          \"&firedb_id=\" + user_id +\n          \"&event_id=\" + item.id;\n        let headers = new Headers ({ 'Content-Type': 'application/x-www-form-urlencoded' });\n        let options = new RequestOptions({ headers: headers }); \n          \n        // Check in user on server\n        this.http.post(url, data, options)\n        .map(res => res.json())\n        .subscribe(data =>\n          console.log(data)\n        );\n\n        console.log(\"Checked out\");\n        console.log(data);\n\n        item.isInEnabled = false;\n        item.isOutEnabled = false;\n\n        if(duration < 60) {\n          alert(\"Thanks for volunteering! You volunteered for \" + duration + \" seconds!\");\n        }\n        else if(duration < 3600) {\n          alert(\"Thanks for volunteering! You volunteered for \" + (duration/60) + \" minutes!\");\n        }\n        else {\n          alert(\"Thanks for volunteering! You volunteered for \" + (duration/3600) + \" hours!\");\n        }\n        \n      });\n      \n      var key = item.id.toString() + \"_check\";\n      this.storage.remove(key);\n    }\n    else {\n      alert(\"You are not close enough to the event. Please move closer.\")\n    }\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/content/content.ts"],"sourceRoot":""}