{"version":3,"sources":["../../src/pages/cards/cards.module.ts","../../src/pages/cards/cards.ts"],"names":[],"mappings":"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","file":"14.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { IonicPageModule } from 'ionic-angular';\n\nimport { CardsPage } from './cards';\n\n@NgModule({\n  declarations: [\n    CardsPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(CardsPage),\n    TranslateModule.forChild()\n  ],\n  exports: [\n    CardsPage\n  ]\n})\nexport class CardsPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cards/cards.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController } from 'ionic-angular';\nimport { Http } from '@angular/http';\nimport {HttpModule, Headers, RequestOptions, Response} from '@angular/http'\nimport 'rxjs/add/operator/map';\nimport { Observable } from 'rxjs/Observable';\nimport { Storage } from '@ionic/storage';\n\nimport firebase from 'firebase';\n\n@IonicPage()\n@Component({\n  selector: 'page-cards',\n  templateUrl: 'cards.html'\n})\nexport class CardsPage {\n  cardItems: any[];\n  eventOpened: Boolean = false;\n  isRegister: Boolean = true;\n  user = firebase.auth().currentUser;\n\n  setRegister(item, isIt) {\n    console.log(\"Function called on ID \" + item.id + \", value = \" + isIt);\n    item.isRegister = isIt;\n    console.log(item.isRegister);\n  }\n\n  constructor(public navCtrl: NavController, public http: Http, public storage: Storage) {\n    this.http.get('https://yourunity-dev.dev/api/events/').map(res => res.json()).subscribe(data => {\n      this.cardItems = data;\n      \n      for(var i = 0; i < this.cardItems.length; i++) {\n        var item = this.cardItems[i];\n        console.log(item.id);\n        setTimeout( function(){\n          storage.get(item.id.toString()).then((val) => {\n            if(val) {\n              console.log(\"already registered\");\n              this.setRegister(item, false);\n            }\n            else {\n              console.log(\"not registered\");\n              this.setRegister(item, true);\n            }      \n          }); \n        },1000);\n      }\n    });\n  }\n\n  register(item) {\n    var user_id = this.user.uid;\n    var url = 'https://yourunity-dev.dev/api/register_event';\n    var data = {\n      \"event_id\" : item.id,\n      \"firedb_id\" : user_id,\n      \"check_in_time\" : 0,\n      \"duration\" : 0,\n      \"activity_status\" : 2\n    };\n\n    let headers = new Headers ({ 'Content-Type': 'application/json' });\n    let options = new RequestOptions({ headers: headers }); \n\n    // Check in user on server\n    this.http.post(url, JSON.stringify(data), options)\n    .map(res => res.json())\n    .subscribe(data =>\n      console.log(data)\n    );\n\n    console.log(\"uploaded\");\n\n    item.isRegister = false;\n\n    this.storage.set(item.id.toString(), \"registered\");\n  }\n\n  openEvent(item) {\n    console.log(\"ID: \" + item.id);\n    console.log(\"Button Enabled: \" + item.isRegister);\n    item.eventOpened = !item.eventOpened;\n    this.eventOpened = !this.eventOpened;\n\n    // this.navCtrl.push('EventDetailPage', {\n    //   event: event\n    // });\n  }\n\n  isOpened() {\n    return this.eventOpened;\n  }\n\n  isCardOpened(item) {\n    return item.eventOpened;\n  }\n\n  canRegister(item) {\n    return item.isRegister;\n  }\n\n  doRefresh(refresher) {\n    this.http.get('https://yourunity-dev.dev/api/events').map(res => res.json()).subscribe(data => {\n      this.cardItems = data;\n      \n      for(var i = 0; i < this.cardItems.length; i++) {\n        var item = this.cardItems[i];\n        this.storage.get(item.id.toString()).then((val) => {\n          if(val) {\n            this.setRegister(item, false);\n          }\n          else {\n            this.setRegister(item, true);\n          }      \n        }); \n      }\n    });\n\n    setTimeout(() => {\n      console.log('Async operation has ended');\n      refresher.complete();\n    }, 700);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cards/cards.ts"],"sourceRoot":""}