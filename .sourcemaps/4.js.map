{"version":3,"sources":["../../src/pages/signup/signup.module.ts","../../src/pages/signup/signup.ts"],"names":[],"mappings":"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","file":"4.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { IonicPageModule } from 'ionic-angular';\n\nimport { SignupPage } from './signup';\n\n@NgModule({\n  declarations: [\n    SignupPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SignupPage),\n    TranslateModule.forChild()\n  ],\n  exports: [\n    SignupPage\n  ]\n})\nexport class SignupPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/signup/signup.module.ts","import { Component } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { IonicPage, NavController, ToastController } from 'ionic-angular';\nimport { Http } from '@angular/http';\nimport {HttpModule, Headers, RequestOptions, Response} from '@angular/http'\nimport 'rxjs/add/operator/map';\n\nimport { User } from '../../providers/providers';\nimport { MainPage } from '../pages';\n\nimport firebase from \"firebase\";\n\n@IonicPage()\n@Component({\n  selector: 'page-signup',\n  templateUrl: 'signup.html'\n})\nexport class SignupPage {\n  // The account fields for the login form.\n  // If you're using the username field with or without email, make\n  // sure to add it to the type\n  account: { name_first: string, name_last: string, email: string, password: string } = {\n    name_first: 'First Name',\n    name_last: 'Last Name',\n    email: 'Your Email',\n    password: 'test'\n  };\n\n  baseUrl: string = 'https://yourunity.org';\n\n  // Our translated text strings\n  private signupErrorString: string;\n\n  constructor(public navCtrl: NavController,\n    public user: User,\n    public toastCtrl: ToastController,\n    public translateService: TranslateService, public http: Http) {\n\n    this.translateService.get('SIGNUP_ERROR').subscribe((value) => {\n      this.signupErrorString = value;\n    })\n  }\n\n  doSignup() {\n    // Attempt to register through Firebase\n\n    var errorBool = false;\n\n    firebase.auth().createUserWithEmailAndPassword(this.account.email, this.account.password).catch(function(error) {\n      // Handle Errors here.\n      var errorCode = error.code;\n      var errorMessage = error.message;\n      // [START_EXCLUDE]\n      if (errorCode == 'auth/weak-password') {\n        alert('The password is too weak.');\n      } \n      else {\n        alert(errorMessage);\n      }\n      console.log(error);\n      // [END_EXCLUDE]\n    });\n    // [END createwithemail]\n\n    firebase.auth().onAuthStateChanged(user => {\n      if(user) {\n        // Update the user's name as well\n        user.updateProfile({\n          displayName: this.account.name_first + \" \" + this.account.name_last,\n          photoURL: \"\"\n        }).then(function() {\n          console.log(user.uid);\n        }).catch(function(error) {\n          // An error happened.\n        });\n\n        this.navCtrl.push(MainPage);\n\n      this.pushAccount(firebase.auth().currentUser.uid);\n      }\n    });\n  }\n\n  pushAccount(user) {\n    // Push information to the database\n    var user_id = user;\n    var url = this.baseUrl + '/api/add_attendee';\n    var data = {\n      \"firedb_id\" : user_id,\n      \"name_first\" : this.account.name_first,\n      \"name_last\" : this.account.name_last,\n      \"avatar\" : \"default.jpg\",\n      \"email\" : this.account.email\n    };\n\n    console.log(data);\n\n    let headers = new Headers ({ 'Content-Type': 'application/json' });\n    let options = new RequestOptions({ headers: headers }); \n\n    // Check in user on server\n    this.http.post(url, JSON.stringify(data), options)\n    .map(res => res.json())\n    .subscribe(data =>\n      console.log(data)\n    );\n  }\n  \n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/signup/signup.ts"],"sourceRoot":""}