{"version":3,"sources":["../../src/pages/signup/signup.module.ts","../../src/pages/signup/signup.ts"],"names":[],"mappings":"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","file":"4.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { IonicPageModule } from 'ionic-angular';\n\nimport { SignupPage } from './signup';\n\n@NgModule({\n  declarations: [\n    SignupPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SignupPage),\n    TranslateModule.forChild()\n  ],\n  exports: [\n    SignupPage\n  ]\n})\nexport class SignupPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/signup/signup.module.ts","import { Component } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { IonicPage, NavController, ToastController, Alert, Platform } from 'ionic-angular';\nimport { Http } from '@angular/http';\nimport {Headers, RequestOptions} from '@angular/http'\nimport 'rxjs/add/operator/map';\nimport { Keyboard } from '@ionic-native/keyboard';\n\nimport { User } from '../../providers/providers';\nimport { MainPage } from '../pages';\n\nimport firebase from \"firebase\";\n\ndeclare var navigator: any;\ndeclare var Connection: any;\n\n@IonicPage()\n@Component({\n  selector: 'page-signup',\n  templateUrl: 'signup.html'\n})\nexport class SignupPage {\n  // The account fields for the login form.\n  // If you're using the username field with or without email, make\n  // sure to add it to the type\n  account: { name_first: string, name_last: string, email: string, password: string } = {\n    name_first: '',\n    name_last: '',\n    email: '',\n    password: ''\n  };\n\n  baseUrl: string = 'https://yourunity.org';\n  email: string;\n  name_first: string;\n  name_last: string;\n  userCreated: boolean = false;\n  keyboardShow: Boolean = true;\n\n  // Our translated text strings\n  private signupErrorString: string;\n\n  constructor(public navCtrl: NavController,\n    public user: User,\n    public toastCtrl: ToastController,\n    private keyboard: Keyboard,\n    public translateService: TranslateService, public http: Http, private platform: Platform) {\n\n    firebase.auth().signOut();\n\n    keyboard.disableScroll(true);\n\n      keyboard.onKeyboardShow()\n      .subscribe(data => {\n        this.keyboardShow = false;\n       //your code goes here\n    });\n\n    keyboard.onKeyboardHide()\n      .subscribe(data => {\n        this.keyboardShow = true;\n       //your code goes here\n    });\n\n    this.translateService.get('SIGNUP_ERROR').subscribe((value) => {\n      this.signupErrorString = value;\n    })\n  }\n  doSignup() {\n    // Attempt to register through Firebase\n\n    var errorBool = false;\n    this.email = this.account.email;\n    this.name_first = this.account.name_first;\n    this.name_last = this.account.name_last;\n\n      firebase.auth().createUserWithEmailAndPassword(this.account.email, this.account.password)\n      .catch(function(error) {\n        // Handle Errors here.\n        var errorCode = error.code;\n        var errorMessage = error.message;\n        // [START_EXCLUDE]\n        if (errorCode == 'auth/weak-password') {\n          alert('The password is too weak.');\n        } \n        else {\n          alert(errorMessage);\n        }\n        console.log(error);\n        // [END_EXCLUDE]\n      });\n    // [END createwithemail]\n\n    firebase.auth().onAuthStateChanged(user => {\n      if(user) {\n        // Update the user's name as well\n        user.updateProfile({\n          displayName: this.account.name_first,\n          photoURL: \"\"\n        }).then(function() {\n          console.log(user.uid);\n        }).catch(function(error) {\n          // An error happened.\n        });\n\n        this.pushAccount(user);\n        this.pushToMain();\n      }\n    });\n  }\n\n  pushAccount(user) {\n    // Push information to the database\n    var user_id = user.uid;\n    var url = this.baseUrl + '/api/add_attendee';\n    var data =\n      \"firedb_id=\" + user_id +\n      \"&name_first=\" + this.name_first +\n      \"&name_last=\" + this.name_last +\n      \"&email=\" + this.email;\n\n    console.log(data);\n\n    let headers = new Headers ({ 'Content-Type': 'application/x-www-form-urlencoded' });\n    let options = new RequestOptions({ headers: headers }); \n\n    // Check in user on server\n    this.http.post(url, data, options)\n    .map(res => res.json())\n    .subscribe(data =>\n      console.log(data)\n    );\n\n    var hello: any = \"hello\";\n    return hello;\n  }\n\n  pushToMain() {\n    this.navCtrl.setRoot(MainPage);\n    var hello: any = \"hello\";\n    return hello;\n  }\n  \n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/signup/signup.ts"],"sourceRoot":""}