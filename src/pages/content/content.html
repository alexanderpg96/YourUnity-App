<ion-header no-shadow no-border>
    <h3>Hello, {{ user.displayName }}</h3>
    <button item-right (click)='openSettings()'>
        <div *ngIf="ios; then iphone else android"></div>
        <ng-template #iphone><ion-icon name="contacts-outline" class="account"></ion-icon></ng-template>
        <ng-template #android><ion-icon name="contacts" class="account-android"></ion-icon></ng-template>
    </button>
</ion-header>

<ion-content>
  <ion-refresher (ionRefresh)="doRefresh($event);">
    <ion-refresher-content>
    </ion-refresher-content>
  </ion-refresher>

  <ion-card class="white-card">  
    <ion-row>
      <ion-col>
          <h3 class="center card-title">Volunteer Stats</h3>
      </ion-col>
    </ion-row>
    <ion-row class="tb-padding">
      <ion-col class="divide">
        <h3 class="hours-events center">{{ time }} Hours</h3>
      </ion-col>
      <ion-col>
          <h3 class="hours-events center">{{ numEvents }} Events</h3>
        </ion-col>
    </ion-row>
  </ion-card>

  <h2>Your Events</h2>
  
    <ion-card *ngFor="let item of cardItems" class="card">
  
      <ion-item class="no-overflow" (click)="toggle(item)">
        <!-- <ion-avatar item-start>
          <img [src]="item.user.avatar">
        </ion-avatar> -->
        <h1>{{item.event_name}}</h1>
        <p class="organization">{{ item.starts * 1000 | date:'MMM d, yyyy' }}</p>
        <p class="time">{{item.starts * 1000 | date:'h:mm a'}} - {{item.ends * 1000 | date:'h:mm a'}}</p>
      </ion-item>
  
      <div class="closed" [ngClass]="{open: isCardOpened(item)}">
  
        <button ion-button outline class="checkin" [ngClass]="{activeButton: isCheckin(item)}" 
          (click)="checkIn(item)" 
          [disabled]="!isCheckin(item)">Check-in</button>
        <button ion-button outline class="checkout" [ngClass]="{activeButton : isCheckout(item)}" 
          (click)="checkOut(item)" 
          [disabled]="!isCheckout(item)">Check-out</button>
          
      </div>
  
      <ion-row>
        <ion-col class="col-border">
          <button ion-button color="light" clear small icon-start class="override-button">
              <div *ngIf="item.type_id === 1"><ion-icon name='paw'></ion-icon></div>
              <div *ngIf="item.type_id === 2"><ion-icon name='school'></ion-icon></div>
              <div *ngIf="item.type_id === 3"><ion-icon name='glasses'></ion-icon></div>
              <div *ngIf="item.type_id === 4"><ion-icon name='leaf'></ion-icon></div>
              <div *ngIf="item.type_id === 5"><ion-icon name='restaurant'></ion-icon></div>
              <div *ngIf="item.type_id === 6"><ion-icon name='home'></ion-icon></div>
              <div *ngIf="item.type_id === 7"><ion-icon name='body'></ion-icon></div>
              <div *ngIf="item.type_id === 8"><ion-icon name='people'></ion-icon></div>
              <div *ngIf="item.type_id === 9"><ion-icon name='brush'></ion-icon></div>
              <div *ngIf="item.type_id === 10"><ion-icon name='laptop'></ion-icon></div>
              <div *ngIf="item.type_id === 11"><ion-icon name='happy'></ion-icon></div>
              <div *ngIf="item.type_id === 12"><ion-icon name='list-box'></ion-icon></div>
          </button>
        </ion-col>
        <ion-col class="col-border">
          <button ion-button color="light" clear small icon-start center class="override-button">
            <!-- <ion-icon name='text'></ion-icon> -->
            <div class="center"><ion-icon name='calendar'></ion-icon><span class="col-text">{{item.starts * 1000 | date:'dd MMM'}}</span></div>
          </button>
        </ion-col>
        <ion-col class="col-border">
          <div *ngIf="ios; then iosMap else googleMap"></div>
            <ng-template #iosMap><a button href="http://maps.apple.com/maps?q={{item.latitude}},{{item.longitude}}"><div class="center center-vert"><ion-icon name='pin'></ion-icon><span class="col-text"> {{ item.distance }} mi</span></div></a></ng-template>
            <ng-template #googleMap><a button href="http://maps.google.com?q={{item.latitude}},{{item.longitude}}"><div class="center center-vert"><ion-icon name='pin'></ion-icon><span class="col-text"> {{ item.distance }} mi</span></div></a></ng-template>
            <!-- <button ion-button color="light" clear small icon-start center class="override-button">
              <div class="center"><ion-icon name='pin'></ion-icon><span class="col-text">1.7 mi</span></div>
            </button> -->
        </ion-col>
  
      </ion-row>
  
    </ion-card>

</ion-content>